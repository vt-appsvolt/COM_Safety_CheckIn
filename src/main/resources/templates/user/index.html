<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Safety Check In</title>
	<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" th:href="@{/css/plugin/bootstrap-theme.css}" >
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{/css/style-responsive.css}" />
	
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
  	<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"> -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"> 
	<!-- <link rel="stylesheet" type="text/css" media="print" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" > -->
	<link rel="stylesheet" type="text/css" th:href="@{/css/plugin/bootstrap-theme.css}" >
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
	<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/themes/smoothness/jquery-ui.css" />
	<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{/css/style-responsive.css}" />
	<!--  <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script> -->
	<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script> -->
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
	<script th:src="@{/js/dist/lib/jquery-ui.min.js}"></script>
	<script th:src="@{/js/dist/lib/external-libs.min.js}"></script>
	<script src="https://rawgit.com/RobinHerbots/Inputmask/4.x/dist/jquery.inputmask.bundle.js"></script>
    <script th:src="@{/js/dist/checkin.min.js?v=13}"></script>
   
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="_csrf_parameter" content="${_csrf.parameterName}">
	<meta name="_csrf_header" content="X-CSRF-TOKEN">
	<meta name="_csrf" content="${_csrf.token}">
</head>

<body>
<section id="container">
<nav class="navbar navbar-light bg-light-gray navbar-expand fixed-top d-print-none">
	   <a class="navbar-brand" href="#" style="padding:0px;">
	   	<img th:src="@{/images/logo.jpg}" width="30" height="30" />
	   	<span class="d-none d-block-md">Safety Check In</span>
	   </a>
  	  <div class="navbar-nav-scroll">
	    <ul class="navbar-nav bd-navbar-nav flex-row">
	      <li class="nav-item ">
		     <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
		  </li>
		  <li class="nav-item dropdown" id="active-program-dropdown"></li>
		  <li class="nav-item d-none d-md-block">
			  <a class="nav-link" href="javascript: document.logoutForm.submit()" role="menuitem"> Logout</a>
			  <form name="logoutForm" th:action="@{/logout}" method="post" th:hidden="true">
			      <input hidden="true" type="submit" value="Sign Out"/>
			  </form> 
		  </li>
		 </ul>
	  </div>  
	  
	   
	  
	  
      
	  <ul class="navbar-nav flex-row ml-auto">
    	<li class="nav-item text-gray" style="padding-right:5px;">
    		<i class="active-user-header-count fas fa-users fa-lg"><span></span></i>
    	</li>
    	<li class="nav-item text-gray">
    		<i class="active-header-count fas fa-school fa-lg"><span></span></i>
    	</li>
      </ul>
      <button class="navbar-toggler d-block d-md-none md-auto" data-toggle="collapse" data-target="#sidebar" style="border:none;">
		<i class="fa-2x fas fa-list"></i>
	 </button>
</nav>
	
	<!-- 
	<div class="collapse" id="navbarMobileDropdown">
	  <div class="navbar-nav-scroll">
	    <ul class="navbar-nav bd-navbar-nav flex-column">
		    <li class="nav-item tab-view" data-view="checkin-log" >
	          <a class="nav-link">Student Checkin Log</a>
	        </li>
	        <li class="nav-item tab-view" data-view="add-student">
	          <a class="nav-link">Add Student</a>
	        </li>
	        <li class="nav-item tab-view" data-view="students">
	          <a class="nav-link">Students</a>
	        </li>
	        <li class="tab-view" data-view="checkin-students" >
	          <a>Check In Student</a>
	        </li>
	  		<li class="nav-item tab-view" data-view="student-billing">
	        	<a class="nav-link">Student Billing</a>
	        </li>
	        <li class="nav-item tab-view" data-view="billing-plans">
	        	<a class="nav-link">Billing Plans</a>
	        </li>
	        <li class="nav-item tab-view" data-view="after-school-programs">
	        	<a class="nav-link">After School Programs</a>
	        </li>
	        <li class="nav-item tab-view" data-view="employee-timeclock">
	        	<a class="nav-link">Employee Timeclock</a>
	        </li>
		      
		      
			  <li class="nav-item">
				  <a class="nav-link" href="javascript: document.logoutForm.submit()" role="menuitem"> Logout</a>
				  <form name="logoutForm" th:action="@{/logout}" method="post" th:hidden="true">
				      <input hidden="true" type="submit" value="Sign Out"/>
				  </form> 
			  </li>
		 </ul>
	  </div>  
  </div>	 -->
    <div id="sidebar" class="d-print-none collapse d-md-block" tabindex="5000" style="overflow: hidden; outline: none;">
        <!-- sidebar menu start-->
        <ul class="sidebar-menu">
          <li class="tab-view active" data-view="active-students" >
            <a>Active Students</a>
          </li>
          <li class="tab-view" data-view="checkin-log" >
            <a>Student Checkin Log</a>
          </li>
          <li class="tab-view" data-view="add-student">
            <a>Add Student</a>
          </li>
          <li class="tab-view" data-view="students">
          	<a>Students</a>
          </li>
          <!-- <li class="tab-view" data-view="checkin-students" >
            <a>Check In Student</a>
          </li> -->
		  <li class="tab-view" data-view="student-billing">
          	<a>Student Billing</a>
          </li>
          <li class="tab-view" data-view="billing-plans">
          	<a>Billing Plans</a>
          </li>
          <li class="tab-view owner-role-tab" data-view="attendance-summary" style="display:none;">
          	<a>Attendance Summary</a>
          </li>
          <li class="tab-view owner-role-tab" data-view="billing-report" style="display:none;">
          	<a>Billing Reports</a>
          </li>
          <li class="tab-view owner-role-tab" data-view="billing-summary-report" style="display:none;">
          	<a>Billing Summary Reports</a>
          </li>
          <li class="tab-view" data-view="after-school-programs">
          	<a>After School Programs</a>
          </li>
          <li class="tab-view" data-view="employee-timeclock">
          	<a>Employee Timeclock</a>
          </li>
          
        </ul>
        <!-- sidebar menu end-->
      </div>
      
      
      
    <section id="main-content" class="sci-main"></section>
    <section id="student-edit-container" class="sci-main"></section>
    <section id="billing-plan-edit-container" class="sci-main"></section>
	<section id="alert-wrapper">
		<section class="wrapper"></section>
	</section>
	<section id="modal-wrapper"></section>
</section>
<script th:inline="javascript">
	$(function() {
		router = function( tab ){
			console.log(['rounter', tab]);
			switch(tab){
				case 'add-student':
					App.getComponent('AddStudent')
		    		.getFn('loadAddStudent', [$('#student-edit-container')]);
					break;
				/*case 'checkin-students':
					ModuleRegistry.getModule('TemplateRegistry')
					.getModule('CheckinResolver')
		    		.getFn('loadCheckinForm', [$('#main-content')]);
					break; */
				case 'students':
					App.getComponent('Students')
		    		.getFn('loadStudents', [$('#main-content')]); 
					break; 
				case 'student-billing':
					App.getComponent('StudentBilling')
					.getFn('loadStudentBilling', [$('#main-content')]); 
					break;
				case 'after-school-programs':
					App.getComponent('AfterSchoolProgram')
					.getFn('loadAfterSchoolPrograms', [$('#main-content')]); 
					break;
				case 'billing-plans':
					App.getComponent('BillingPlans')
					.getFn('loadBillingPlans', [$('#main-content')]); 
					break;
				case 'employee-timeclock':
					App.getComponent('EmployeeTimeclock')
					.getFn('loadEmployeeTimeclock', [$('#main-content')]); 
					break;
				case 'checkin-log':
					App.getComponent('CheckinLog')
					.getFn('loadCheckinLog', [$('#main-content')]); 
					break;
				case 'attendance-summary':
					App.getComponent('AttendanceSummary')
					.getFn('loadAttendanceSummary', [$('#main-content')]); 
					break;
				case 'billing-report':
					App.getComponent('BillingReports')
					.getFn('loadWeeklyDepositReport', [$('#main-content')]); 
					break;
				case 'billing-summary-report':
					App.getComponent('BillingReports')
					.getFn('loadWeeklySummaryDepositReport', [$('#main-content')]); 
					break;
				case 'active-students':
				default:
					tab='active-students';
					App.getComponent('ActiveStudents')
					.getFn('loadActiveStudents', [$('#main-content')]);
					break;
			}
			var url = [[@{/checkin}]]+'?view='+tab;
	    	window.history.pushState("Checkin","Checkin", url);
	    	activateTab(tab);
		}
		activateTab = function(tab){
			$('.tab-view.active').removeClass('active');
			$('.tab-view[data-view='+tab+']').addClass('active');
		}
		
		
		$('.tab-view').click(function(){
			router( $(this).data('view') );
		});
		
		
		<!-- On load  -->
		Auth.setEmployeeRoles( [[${employeeRoles}]] );
		router( [[${view}]] ); 
		
		App.getComponent('ActiveStudents')
		.getFn('activeStudentPoll');
		
		App.getComponent('AfterSchoolProgram')
		.getFn('loadActiveEmployeeProgramDropDown');
		
		if( Auth.inAuthorizedGroup('OWNERS') ){
			$('.owner-role-tab').show();
		}else{
			$('.owner-role-tab').hide();
		}
		
	});

</script>
</body>
</html>